<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seznam cenovek - LabelMaker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <h1>üè• LabelMaker</h1>
            <p>L√©k√°rensk√Ω syst√©m</p>
        </div>
        <div class="nav-menu">
            <a href="/" class="nav-item">
                <span class="nav-item-icon">üè†</span>
                <span class="nav-item-text">Dom≈Ø</span>
            </a>
            <a href="/labels" class="nav-item active">
                <span class="nav-item-icon">üè∑Ô∏è</span>
                <span class="nav-item-text">Cenovky</span>
            </a>
            <a href="/labels/new" class="nav-item">
                <span class="nav-item-icon">‚ûï</span>
                <span class="nav-item-text">Nov√° cenovka</span>
            </a>
            <a href="/labels/print" class="nav-item">
                <span class="nav-item-icon">üñ®Ô∏è</span>
                <span class="nav-item-text">Tisk cenovek</span>
            </a>
            <a href="/forms" class="nav-item">
                <span class="nav-item-icon">üì¶</span>
                <span class="nav-item-text">L√©kov√© formy</span>
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-header">
            <h1>üè∑Ô∏è Seznam cenovek</h1>
            <p>Spravujte v≈°echny cenovky</p>
        </div>

        <div class="container">
            <div class="action-bar">
                <div class="filters">
                    <input type="text" id="searchInput" placeholder="üîç Hledat podle n√°zvu..." class="search-input">

                    <select id="printFilter" class="filter-select">
                        <option value="all">V≈°echny cenovky</option>
                        <option value="marked">K tisku</option>
                        <option value="unmarked">Neoznaƒçen√©</option>
                    </select>
                </div>

                <a href="/labels/new" class="btn btn-primary">
                    ‚ûï Nov√° cenovka
                </a>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>N√°zev produktu</th>
                            <th>Forma</th>
                            <th>Mno≈æstv√≠</th>
                            <th>Cena</th>
                            <th>Jedn. cena</th>
                            <th>K tisku</th>
                            <th>Akce</th>
                        </tr>
                    </thead>
                    <tbody id="labelsTableBody">
                        <tr class="loading-row">
                            <td colspan="7">Naƒç√≠t√°m data...</td>
                        </tr>
                    </tbody>
                </table>

                <div id="emptyState" class="empty-state" style="display: none;">
                    <div class="empty-icon">üì≠</div>
                    <p>≈Ω√°dn√© cenovky k zobrazen√≠.</p>
                    <a href="/labels/new" class="btn btn-primary">
                        Vytvo≈ôit cenovku
                    </a>
                </div>
            </div>
    </main>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upravit cenovku</h2>
                <button class="modal-close" onclick="closeEditModal()">&times;</button>
            </div>
            <form id="editForm" onsubmit="handleEditSubmit(event)">
                <input type="hidden" id="editLabelId">

                <div class="form-group">
                    <label for="editProductName">N√°zev produktu *</label>
                    <input type="text" id="editProductName" required>
                </div>

                <div class="form-group">
                    <label for="editForm">Forma *</label>
                    <select id="editForm" required>
                        {% for form in forms %}
                        <option value="{{ form.short_name }}">
                            {{ form.name }} ({{ form.short_name }})
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label for="editAmount">Mno≈æstv√≠ *</label>
                    <input type="number" id="editAmount" step="0.01" min="0" required>
                </div>

                <div class="form-group">
                    <label for="editPrice">Cena (Kƒç) *</label>
                    <input type="number" id="editPrice" step="0.01" min="0" required>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-danger" onclick="closeEditModal()">
                        Zru≈°it
                    </button>
                    <button type="submit" class="btn btn-primary">
                        üíæ Ulo≈æit zmƒõny
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Potvrdit smaz√°n√≠</h2>
                <button class="modal-close" onclick="closeDeleteModal()">&times;</button>
            </div>
            <div style="padding: 20px 0;">
                <p style="font-size: 1.05em; color: var(--text-primary); margin-bottom: 16px;">Opravdu chcete smazat
                    cenovku "<strong><span id="deleteLabelName"></span></strong>"?</p>
                <p style="color: var(--red); font-weight: 600; display: flex; align-items: center; gap: 8px;">‚ö†Ô∏è Tato
                    akce je nevratn√°!</p>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="closeDeleteModal()">
                    Zru≈°it
                </button>
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">
                    üóëÔ∏è Smazat
                </button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/list_labels.js') }}"></script>
</body>

</html>